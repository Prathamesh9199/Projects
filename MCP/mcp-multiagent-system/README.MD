# MCP Multi-Agent System

This project is a modular, local-first Multi-Agent system that implements the MCP (Multi-agent Communication Protocol) using JSON-RPC over `stdio`. It includes:

- **Math Server** â€“ provides arithmetic tools.
- **Weather Server** â€“ simulates weather queries.
- **Clients** â€“ route requests between the host and servers.
- **Host** â€“ orchestrates agents using LangGraph and Mistral 7B via Ollama.
- **Shared utilities** â€“ standardize MCP interactions.

## ðŸ“ Project Structure

```
mcp-multiagent-system/
â”œâ”€â”€ clients/
â”‚   â”œâ”€â”€ math_client/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â””â”€â”€ weather_client/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ main.py
â”œâ”€â”€ host/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.json
â”‚   â”œâ”€â”€ graph/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ build_graph.py
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ prompts.txt
â”œâ”€â”€ servers/
â”‚   â”œâ”€â”€ math_server/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.json
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ prompts/prompts.txt
â”‚   â”‚   â”œâ”€â”€ resources/constants.py
â”‚   â”‚   â””â”€â”€ tools/
â”‚   â”‚       â”œâ”€â”€ add.py
â”‚   â”‚       â”œâ”€â”€ area_of_circle.py
â”‚   â”‚       â””â”€â”€ subtract.py
â”‚   â””â”€â”€ weather_server/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.json
â”‚       â”œâ”€â”€ main.py
â”‚       â”œâ”€â”€ prompts/prompts.txt
â”‚       â”œâ”€â”€ resources/city_list.py
â”‚       â””â”€â”€ tools/
â”‚           â”œâ”€â”€ rain.py
â”‚           â””â”€â”€ temperature.py
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ utils.py
â”œâ”€â”€ test/
â”‚   â””â”€â”€ test_math_server.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## ðŸ”§ Installation

### 1. Clone the Repository

```bash
git clone https://github.com/your-username/mcp-multiagent-system
cd mcp-multiagent-system
```

### 2. Create Virtual Environment

```bash
python -m venv .venv
.venv\Scripts\activate    # Windows
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

## ðŸš€ Running the System

> Make sure to run each component in a separate terminal window.

### 1. Start Math Server

```bash
python servers/math_server/main.py
```

### 2. Start Weather Server

```bash
python servers/weather_server/main.py
```

### 3. Start Math Client

```bash
python clients/math_client/main.py
```

### 4. Start Weather Client

```bash
python clients/weather_client/main.py
```

### 5. Start Host (LangGraph)

```bash
python host/main.py
```

## ðŸ§  Tools Provided

### Math Server

- `add(a: float, b: float) â†’ float`
- `subtract(a: float, b: float) â†’ float`
- `area_of_circle(radius: float) â†’ float`

### Weather Server

- `temperature(location: str) â†’ float`
- `rain(location: str) â†’ float`

## ðŸ§ª Testing

### Run the math server test

```bash
python test/test_math_server.py
```

This checks if the server responds correctly to an `initialize` + `add` request.

## ðŸ’¡ Sample JSON-RPC Request

Request:

```json
{
  "jsonrpc": "2.0",
  "id": "1",
  "method": "add",
  "params": {
    "a": 5,
    "b": 3
  }
}
```

Response:

```json
{
  "jsonrpc": "2.0",
  "id": "1",
  "result": 8
}
```

## ðŸ“¦ Requirements

```
fastmcp==2.11.0
langgraph==0.0.33
langchain==0.2.0
ollama==0.1.8
```

## ðŸ“š Resources

- FastMCP SDK: https://github.com/monadfi/fastmcp
- LangGraph: https://github.com/langchain-ai/langgraph
- Ollama: https://ollama.com
- JSON-RPC Spec: https://www.jsonrpc.org/specification

## ðŸ“œ License

MIT License.